import unittest
from jit_tools import *
from render_los_image_jit import *
import pygame

class TestJit(unittest.TestCase):
    def test_jit_los(self):
        player_pos = [-58.21221355950286, -314.7711827184913]
        #camera_pos = [623.8173302107729, 500]
        camera_pos = [100, 200]
        start_pos = [player_pos[0] - camera_pos[0], player_pos[1] - camera_pos[1]]
        walls =  np.array([
             [ 356,   67,  356,    0],
             [ 356,    0,  445 ,   0],
             [ 445,   67,  356  , 67],
             [ 445,    0,  445   ,67],
             [ 799,   66,  799,    0],
             [ 799,    0,  889 ,   0],
             [ 889,    0,  889  , 66],
             [ 889,   66,  799   ,66],
             [ 800,  200,  800,  532],
             [ 800,  200,  889 , 200],
             [ 889,  200,  889  ,266],
             [ 889,  266, 1066,  266],
             [1066,  266, 1066 , 334],
             [1245,  328, 1245  ,266],
             [1245,  266, 1422,  266],
             [1422,  266, 1422,  328],
             [1422,  328, 1245,  328],
             [ 355,  333,  355,  267],
             [ 355,  267,  443,  267],
             [ 443,  267,  443,  666],
             [ 266,  333,  355,  333],
             [ 266,  466,  266,  333],
             [ 266,  466,  355,  466],
             [   0,  466,    0,  334],
             [   0,  334,   88,  334],
             [  88,  334,   88,  466],
             [  88,  466,    0,  466],
             [ 889,  334, 1066,  334],
             [ 889,  334,  889,  532],
             [ 889,  532,  800,  532],
             [ 355,  666,  355,  466],
             [ 443,  666,  355,  666],
             [ 800,  868,  800,  734],
             [ 800,  734,  888,  734],
             [ 888,  734,  888,  868],
             [ 976,  868,  888,  868],
             [ 357,  868,  357,  801],
             [ 357,  801,  444,  801],
             [ 444,  801,  444,  868],
             [ 800,  868,  444,  868],
             [ 179,  934,  179,  868],
             [ 179,  868,  357,  868],
             [ 976,  868,  976,  934],
             [ 976,  934,  179,  934],
             [1156,  934, 1156,  868],
             [1156,  868, 1422,  868],
             [1422,  868, 1422,  934],
             [1422,  934, 1156,  934]])
        size1 = 1336, 768
        size = np.array(size1)
        l = pygame.display.set_mode(size1)
        l, t1 = draw(l, 1, camera_pos, player_pos, None, walls, size)
